<template name="groupsListWidget">
    <div class="row">
        <div class="col-xs-8">
            <div class="box">
                <div class="box-header">
                    <h3 class="box-title">My Groups</h3>
                </div>
                <!-- /.box-header -->
                <div class="box-body table-responsive no-padding">
                    <table class="table table-hover">
                        <thead>
                        <tr>
                            <th>Group title</th>
                            <th>Parent Group</th>
                            <th>Related Organization</th>
                            <th>Actions</th>
                        </tr>
                        </thead>
                        <tbody>
                        {{#if groupsList}}

                            {{#each group in groupsList}}
                                {{> groupItemWidget (groupItem group)}}
                            {{/each}}
                        {{/if}}
                        </tbody>
                    </table>
                    {{#unless groupsList}}
                        <div class="text-center">
                            <h3>You are not a member of any groups yet</h3>
                        </div>
                    {{/unless}}

                </div>
                {{#if isGroupsLoad}}
                    <div class="overlay">
                        <i class="fa fa-refresh fa-spin"></i>
                    </div>
                {{/if}}
            </div>
        </div>

        {{#if selectedGroup}}
            <div class="col-xs-4">
                <div class="box box-danger">
                    <div class="box-header with-border">
                        <h3 class="box-title">{{selectedGroup.group.title}} users</h3>

                        <div class="box-tools pull-right">
                            <span class="label label-danger">{{selectedGroup.users.length}}</span>
                        </div>
                    </div>

                    <div class="box-body no-padding">
                        <ul class="users-list clearfix">
                            {{#each user in selectedGroup.users}}
                                <li>
                                    <img src="dist/img/user1-128x128.jpg" alt="User Image">
                                    <a class="users-list-name" href="#">{{user.firstName}} {{user.lastName}}</a>
                                    <span class="users-list-date">{{user.email}}</span>
                                </li>
                            {{/each}}
                        </ul>

                    </div>
                </div>


                <div class="box">
                    <div class="box-header">
                        <h3 class="box-title">Group permissions</h3>
                    </div>
                    <div class="box-body">
                        <p>
                            {{#each permission in selectedGroup.group.permissions}}
                                <button type="button" class="btn bg-olive btn-flat margin">{{permission}}
                                </button>
                            {{/each}}
                        </p>
                    </div>
                </div>
            </div>
        {{/if}}
    </div>
</template>
